## TODO
[x] Валидация авторизации на сервере: проверять Firebase ID token и получать userId на бэке, не доверять userId из query/body во всех API (`/api/documents`, `/api/sections`).
[ ] Порядок секций: поле `order` (порядок Категорий) не обновляется и не редактируется в UI. Добавить эндпоинт/перетаскивание в сайдбаре для перестановки разделов/подразделов.
[x] Загрузка с привязкой к разделам: на `/upload` нет выбора section/subsection, новые документы оказываются “без раздела”. Добавить селекторы и прокидывать `sectionId/subsectionId` в `/api/documents`.
[x] Редактирование метаданных документов: диалог редактирования меняет только title/section. Добавить поля для `description`/`tags` и PATCH-логику.
[ ] Фильтрация на стороне API: сейчас `/api/documents` возвращает все документы пользователя, а фильтрация по разделу в UI — клиентская. Добавить фильтры (`sectionId`, `subsectionId`, поисковая строка) и соответствующие индексы Firestore.
[ ] Поиск по токенам: `searchTokens` сохраняются, но не используются. Добавить поиск (параметр `q`) или отдельный endpoint, который ищет по токенам.
[ ] Полный список и пагинация: Добавить постраничный список/инфинит-скролл с `limit/startAfter` для снижения объёма выборки.
[x] Перенести UI, связанный с master key/backup phrase, из `/upload` в `/settings` (оставить на upload только блокирующее сообщение и ссылку в Settings).
[x] Сделать UX ключа «настойчивым»: явное подтверждение сохранения backup phrase, предупреждение до закрытия/ухода без подтверждения, понятный recovery-сценарий.
